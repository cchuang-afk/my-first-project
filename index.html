<!DOCTYPE html>
<!-- saved from url=(0047)https://cchuang-afk.github.io/my-first-project/ -->
<html lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜é›„å¸‚115å¹´åº¦å­¸æ ¡è­·ç†äººå“¡å¯’å‡ç¹¼çºŒæ•™è‚²ç ”ç¿’èª²ç¨‹å ±åè¡¨</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* ä½¿ç”¨ Inter å­—é«”ä½œç‚ºä¸»è¦å­—é«” */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        /* ä¸»æ¨™é¡Œæ¨£å¼ */
        .main-header {
            background-color: #0ea5e9; /* Sky 500 */
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.06);
        }
        /* å½ˆçª—èƒŒæ™¯å±¤çš„å‹•ç•«æ•ˆæœ */
        .modal-bg {
            transition: opacity 0.3s ease-in-out;
        }
        /* å½ˆçª—å…§å®¹çš„å‹•ç•«æ•ˆæœ */
        .modal-content {
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
            transform: translateY(-50px);
            opacity: 0;
        }
        .modal-open .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        /* å¾Œå°æ¸…å–®è¡¨æ ¼æ¨£å¼ (é›–ç„¶å·²ç§»é™¤æ¸…å–®åŠŸèƒ½ï¼Œä½†ä¿ç•™æ¨£å¼å®šç¾©) */
        .backend-table th, .backend-table td {
            padding: 10px 14px;
            border-bottom: 1px solid #e5e7eb;
            white-space: nowrap;
            text-align: left;
        }
        .backend-table th {
            background-color: #e5e7eb; /* Gray 200 */
            font-weight: 600;
            color: #374151; /* Gray 700 */
            text-transform: none;
            font-size: 0.8rem;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .card {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>

    <!-- ä¸»å®¹å™¨ -->
    <div class="min-h-screen flex flex-col items-center">
        <!-- å›ºå®šé ‚éƒ¨æ¨™é¡Œæ¬„ -->
        <header class="main-header w-full">
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h1 class="text-3xl sm:text-4xl font-extrabold tracking-tight">é«˜é›„å¸‚115å¹´åº¦å­¸æ ¡è­·ç†äººå“¡å¯’å‡ç¹¼çºŒæ•™è‚²ç ”ç¿’èª²ç¨‹å ±åç¶²</h1>
                <p class="text-sky-100 mt-1 text-lg">è«‹å¡«å¯«æ‚¨çš„å ±åè³‡è¨Š(ç¾åœ¨ç‚ºæ¸¬è©¦ç‰ˆå ±åæ™‚é–“ç‚º1æœˆ5æ—¥~1æœˆ9æ—¥)</p>
            </div>
        </header>

        <main class="w-full max-w-4xl p-4 sm:p-8">
            
            <!-- Firebase ç‹€æ…‹/éŒ¯èª¤è¨Šæ¯ -->
            <div id="statusMessage" class="w-full max-w-2xl p-3 mb-4 rounded-lg text-center text-sm font-medium transition duration-300">ç³»çµ±æº–å‚™å°±ç·’ã€‚</div>

            <!-- å ±åè¡¨å–®å€å¡Š -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">å ±åè¡¨å–®</h2>

                <form id="registrationForm" class="space-y-4">
                    
                    <!-- å­¸æ ¡æ¬„ä½ -->
                    <div>
                        <label for="school" class="block text-sm font-medium text-gray-700 mb-1">å­¸æ ¡ (School)</label>
                        <input type="text" id="school" name="school" placeholder="è«‹è¼¸å…¥å­¸æ ¡åç¨±" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                    </div>

                    <!-- å§“åæ¬„ä½ -->
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-1">å§“å (Name)</label>
                        <input type="text" id="name" name="name" placeholder="è«‹è¼¸å…¥æ‚¨çš„å§“å" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                    </div>

                    <!-- èº«ä»½è­‰å­—è™Ÿæ¬„ä½ -->
                    <div>
                        <label for="id_number" class="block text-sm font-medium text-gray-700 mb-1">èº«ä»½è­‰å­—è™Ÿ (ID Number)</label>
                        <input type="text" id="id_number" name="id_number" placeholder="è«‹è¼¸å…¥èº«ä»½è­‰å­—è™Ÿ (ä¾‹å¦‚: A123456789)" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150 uppercase">
                        <p class="mt-1 text-xs text-gray-500">æ ¼å¼: 1ä½å¤§å¯«è‹±æ–‡å­—æ¯ + 9ä½æ•¸å­—</p>
                    </div>

                    <!-- æ‰‹æ©Ÿè™Ÿç¢¼æ¬„ä½ -->
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">æ‰‹æ©Ÿ (Phone Number)</label>
                        <input type="tel" id="phone" name="phone" placeholder="è«‹è¼¸å…¥æ‰‹æ©Ÿè™Ÿç¢¼ (ä¾‹å¦‚: 0912345678)" required="" maxlength="10" pattern="[0-9]{10}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                        <p class="mt-1 text-xs text-gray-500">æ ¼å¼: 10ä½æ•¸å­— (ä¾‹å¦‚ 09xxxxxxxx)</p>
                    </div>
                    
                    <!-- ä¸­åˆé¤é» (å·²æ–°å¢ä¸ç”¨é¤é¸é …) -->
                    <div>
                        <label for="meal" class="block text-sm font-medium text-gray-700 mb-1">ä¸­åˆé¤é»è«‹è‡ªå‚™é¤å…· (Meal)</label>
                        <select id="meal" name="meal" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150">
                            <option value="è‘·é£Ÿ">è‘·é£Ÿ</option>
                            <option value="ç´ é£Ÿ">ç´ é£Ÿ</option>
                            <option value="ä¸ç”¨é¤">ä¸ç”¨é¤</option>
                        </select>
                    </div>

                    <!-- æƒ³è«‹æ•™è¬›å¸«å•é¡Œ (é¸å¡«) -->
                    <div>
                        <label for="question" class="block text-sm font-medium text-gray-700 mb-1">æƒ³è«‹æ•™è¬›å¸«å•é¡Œ (Question) (é¸å¡«)</label>
                        <textarea id="question" name="question" placeholder="è«‹è©³ç´°å…·é«”èªªæ˜æ‚¨æƒ³è«‹æ•™è¬›å¸«çš„å•é¡Œ" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-sky-500 focus:border-sky-500 transition duration-150 h-24"></textarea>
                    </div>
                    
                    <!-- æäº¤æŒ‰éˆ• -->
                    <button type="submit" id="submitButton" class="w-full bg-sky-600 text-white py-3 mt-6 rounded-xl font-semibold hover:bg-sky-700 transition duration-200 shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 disabled:opacity-50">
                        ç«‹å³å ±å
                    </button>
                </form>
            </div>

            <!-- ç ”ç¿’æ´»å‹•ç°½åˆ°å€å¡Š -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">ç ”ç¿’æ´»å‹•ç°½åˆ°</h2>

                <div class="space-y-4">
                    <!-- èº«ä»½è­‰å­—è™Ÿæ¬„ä½ for Sign-In/Out -->
                    <div>
                        <label for="sign_id_number" class="block text-sm font-medium text-gray-700 mb-1">
                            ç°½åˆ°/ç°½é€€èº«ä»½è­‰å­—è™Ÿ (ID Number)
                        </label>
                        <input type="text" id="sign_id_number" placeholder="è«‹è¼¸å…¥èº«ä»½è­‰å­—è™Ÿé€²è¡Œç°½åˆ°æˆ–ç°½é€€" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 transition duration-150 uppercase">
                    </div>
                    
                    <div class="flex flex-col space-y-2 sm:space-y-0 sm:flex-row sm:space-x-2 pt-2">
                        <!-- ä¸Šåˆç°½åˆ°æŒ‰éˆ• (å·²ç§»é™¤: (ç ”ç¿’å…©å¤©)) -->
                        <button id="morningCheckInButton" type="button" class="w-full sm:w-1/3 bg-green-600 text-white py-3 rounded-xl font-semibold hover:bg-green-700 transition duration-200 shadow-md disabled:opacity-50">
                            ä¸Šåˆç°½åˆ°
                        </button>
                        <!-- ä¸‹åˆç°½åˆ°æŒ‰éˆ• (å·²ç§»é™¤: (ç ”ç¿’å…©å¤©)) -->
                        <button id="afternoonCheckInButton" type="button" class="w-full sm:w-1/3 bg-yellow-600 text-white py-3 rounded-xl font-semibold hover:bg-yellow-700 transition duration-200 shadow-md disabled:opacity-50">
                            ä¸‹åˆç°½åˆ°
                        </button>
                        <!-- ä¸‹åˆç°½é€€æŒ‰éˆ• (å·²ç§»é™¤: (ç ”ç¿’å…©å¤©)) -->
                        <button id="afternoonCheckOutButton" type="button" class="w-full sm:w-1/3 bg-red-600 text-white py-3 rounded-xl font-semibold hover:bg-red-700 transition duration-200 shadow-md disabled:opacity-50">
                            ä¸‹åˆç°½é€€
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- æ»¿æ„åº¦èª¿æŸ¥å€å¡Š (UPDATED TITLE) -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">æ»¿æ„åº¦èª¿æŸ¥</h2>

                <div class="space-y-4">
                    <!-- èº«ä»½è­‰å­—è™Ÿæ¬„ä½ for Survey Access -->
                    <div>
                        <label for="survey_id_number" class="block text-sm font-medium text-gray-700 mb-1">
                            èº«ä»½è­‰å­—è™Ÿ (ID Number)
                        </label>
                        <input type="text" id="survey_id_number" placeholder="è«‹è¼¸å…¥èº«ä»½è­‰å­—è™Ÿä»¥å¡«å¯«å•å·" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 uppercase">
                    </div>

                    <!-- é€²å…¥å¡«å¯«æŒ‰éˆ• -->
                    <button id="enterSurveyButton" type="button" class="w-full bg-green-500 text-white py-3 mt-4 rounded-xl font-semibold hover:bg-green-600 transition duration-200 shadow-lg disabled:opacity-50">
                        é€²å…¥å¡«å¯«æ»¿æ„åº¦èª¿æŸ¥è¡¨
                    </button>
                </div>
            </div>
            
            <!-- å–æ¶ˆå ±åå€å¡Š -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">å–æ¶ˆå ±å</h2>

                <div class="space-y-4">
                    <!-- èº«ä»½è­‰å­—è™Ÿæ¬„ä½ for å–æ¶ˆ -->
                    <div>
                        <label for="cancel_id_number" class="block text-sm font-medium text-gray-700 mb-1">
                            æ¬²å–æ¶ˆå ±åè€…çš„èº«ä»½è­‰å­—è™Ÿ (ID Number)
                        </label>
                        <input type="text" id="cancel_id_number" placeholder="è«‹è¼¸å…¥èº«ä»½è­‰å­—è™Ÿä»¥å–æ¶ˆå ±å" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 transition duration-150 uppercase">
                    </div>

                    <!-- å–æ¶ˆæŒ‰éˆ• -->
                    <button id="cancelRegistrationButton" type="button" class="w-full bg-red-500 text-white py-3 mt-4 rounded-xl font-semibold hover:bg-red-600 transition duration-200 shadow-lg disabled:opacity-50">
                        ç¢ºå®šå–æ¶ˆå ±å
                    </button>
                </div>
            </div>

            <!-- å­¸åˆ†æŸ¥è©¢å€å¡Š (NEW) -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 border-b pb-3">å­¸åˆ†æŸ¥è©¢ <span class="text-sm font-normal text-gray-500">(æŸ¥è©¢é–‹æ”¾æ™‚é–“å°‡å¦è¡Œå…¬å¸ƒ)</span></h2>

                <div class="space-y-4">
                    <!-- èº«ä»½è­‰å­—è™Ÿæ¬„ä½ for æŸ¥è©¢ -->
                    <div>
                        <label for="query_id_number" class="block text-sm font-medium text-gray-700 mb-1">
                            èº«ä»½è­‰å­—è™Ÿ (ID Number)
                        </label>
                        <input type="text" id="query_id_number" placeholder="è«‹è¼¸å…¥èº«ä»½è­‰å­—è™Ÿä»¥æŸ¥è©¢å­¸åˆ†ç‹€æ…‹" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-purple-500 focus:border-purple-500 transition duration-150 uppercase">
                    </div>

                    <!-- æŸ¥è©¢æŒ‰éˆ• -->
                    <button id="creditQueryButton" type="button" class="w-full bg-purple-500 text-white py-3 mt-4 rounded-xl font-semibold hover:bg-purple-600 transition duration-200 shadow-lg disabled:opacity-50">
                        æŸ¥è©¢å­¸åˆ†ç”³è«‹ç‹€æ…‹
                    </button>
                </div>
            </div>
            
            <!-- ç³»çµ±è¨­å®šå€å¡Š (æ›´æ–°ç‚ºå¯†ç¢¼æ§ç®¡é¡¯ç¤º) -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card mb-8">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-semibold text-gray-700">æ™‚é–“ç°½åˆ°è¨­å®š</h2>

                    <!-- 1. é¡¯ç¤º/éš±è— æŒ‰éˆ• (æ¨£å¼å·²èª¿æ•´ç‚ºèˆ‡åŒ¯å‡ºæŒ‰éˆ•ç›¸è¿‘) -->
                    <button id="toggleSettingsButton" type="button" class="px-4 py-2 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 transition duration-150 shadow-md disabled:opacity-50">
                        è¨­å®šæ™‚é–“
                    </button>
                </div>
                
                <p class="mt-4 text-gray-500 text-sm">
                    é»æ“ŠæŒ‰éˆ•å¾Œè¼¸å…¥å¯†ç¢¼ï¼Œå³å¯è¨­å®šç°½åˆ°/ç°½é€€çš„é–‹æ”¾æ™‚é–“å€é–“ã€‚
                </p>

                <!-- 2. å¯†ç¢¼é©—è­‰å€å¡Š (é è¨­éš±è—) -->
                <div id="settingsAccessSection" class="hidden p-4 mt-4 bg-yellow-50 border border-yellow-300 rounded-xl shadow-inner">
                    <label for="settingsAccessPassword" class="block text-sm font-medium text-yellow-700 mb-2">
                        <span class="font-bold">ğŸ”’ å¯†ç¢¼é©—è­‰ï¼š</span> è¼¸å…¥å¯†ç¢¼ä»¥å­˜å–è¨­å®šã€‚
                    </label>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <input type="password" id="settingsAccessPassword" placeholder="è¼¸å…¥å¯†ç¢¼..." class="flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:ring-yellow-500 focus:border-yellow-500 transition duration-150">
                        <button id="confirmSettingsAccessButton" type="button" class="px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition duration-150 shadow-md">
                            ç¢ºèªå­˜å–
                        </button>
                    </div>
                    <p id="accessError" class="text-red-600 text-xs mt-2 hidden">å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥ã€‚</p>
                </div>
                
                <!-- 3. æ™‚é–“è¨­å®šè¼¸å…¥å€å¡Š (é è¨­éš±è—ï¼Œé©—è­‰æˆåŠŸå¾Œé¡¯ç¤º) -->
                <div class="space-y-4 hidden mt-4" id="settingsInputsContainer">
                    
                    <!-- ä¸Šåˆç°½åˆ°æ™‚é–“å€é–“è¨­å®š -->
                    <div class="space-y-2 border-b pb-4 border-amber-100">
                        <label class="block text-sm font-bold text-gray-700">ä¸Šåˆç°½åˆ°é–‹æ”¾å€é–“ (Morning Check-in Time Range)</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="setting_morning_ci_start" class="block text-xs font-medium text-gray-500 mb-1">é–‹å§‹æ™‚é–“</label>
                                <input type="datetime-local" id="setting_morning_ci_start" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 transition duration-150">
                            </div>
                            <div>
                                <label for="setting_morning_ci_end" class="block text-xs font-medium text-gray-500 mb-1">çµæŸæ™‚é–“</label>
                                <input type="datetime-local" id="setting_morning_ci_end" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:border-amber-500 transition duration-150">
                            </div>
                        </div>
                    </div>

                    <!-- ä¸‹åˆç°½åˆ°æ™‚é–“å€é–“è¨­å®š -->
                    <div class="space-y-2 border-b pb-4 border-amber-100">
                        <label class="block text-sm font-bold text-gray-700">ä¸‹åˆç°½åˆ°é–‹æ”¾å€é–“ (Afternoon Check-in Time Range)</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="setting_afternoon_ci_start" class="block text-xs font-medium text-gray-500 mb-1">é–‹å§‹æ™‚é–“</label>
                                <input type="datetime-local" id="setting_afternoon_ci_start" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:focus:border-amber-500 transition duration-150">
                            </div>
                            <div>
                                <label for="setting_afternoon_ci_end" class="block text-xs font-medium text-gray-500 mb-1">çµæŸæ™‚é–“</label>
                                <input type="datetime-local" id="setting_afternoon_ci_end" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:focus:border-amber-500 transition duration-150">
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸‹åˆç°½é€€æ™‚é–“å€é–“è¨­å®š -->
                    <div class="space-y-2">
                        <label class="block text-sm font-bold text-gray-700">ä¸‹åˆç°½é€€é–‹æ”¾å€é–“ (Afternoon Check-out Time Range)</label>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="setting_afternoon_co_start" class="block text-xs font-medium text-gray-500 mb-1">é–‹å§‹æ™‚é–“</label>
                                <input type="datetime-local" id="setting_afternoon_co_start" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:focus:border-amber-500 transition duration-150">
                            </div>
                            <div>
                                <label for="setting_afternoon_co_end" class="block text-xs font-medium text-gray-500 mb-1">çµæŸæ™‚é–“</label>
                                <input type="datetime-local" id="setting_afternoon_co_end" required="" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-amber-500 focus:focus:border-amber-500 transition duration-150">
                            </div>
                        </div>
                    </div>

                    <!-- å„²å­˜/é‚„åŸæŒ‰éˆ•å€å¡Š -->
                    <div id="settingsSaveSection" class="p-4 bg-yellow-50 border border-yellow-300 rounded-lg shadow-inner space-y-2">
                        <label class="block text-sm font-medium text-yellow-700 mb-2">
                            <span class="font-bold">ğŸ’¾ è¨­å®šæ“ä½œï¼š</span> å„²å­˜æˆ–é‚„åŸæ™‚é–“å€é–“ã€‚
                        </label>
                        <button id="saveSettingsButton" type="button" class="w-full px-4 py-2 bg-amber-600 text-white text-sm font-medium rounded-lg hover:bg-amber-700 transition duration-150 shadow-md disabled:opacity-50">
                            å„²å­˜è¨­å®š
                        </button>
                        <button id="resetTimeSettingsButton" type="button" class="w-full px-4 py-2 bg-gray-500 text-white text-sm font-medium rounded-lg hover:bg-gray-600 transition duration-150 shadow-md disabled:opacity-50">
                            é‚„åŸæ™‚é–“è¨­å®š (è‡³é è¨­å€¼)
                        </button>
                    </div>
                </div>
            </div>

            <!-- å¾Œå°è³‡æ–™æ“ä½œå€å¡Š -->
            <div class="w-full bg-white p-6 sm:p-8 rounded-xl card">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-2xl font-semibold text-gray-700 whitespace-nowrap">å¾Œå°è³‡æ–™æ“ä½œ</h2>
                    
                    <!-- é€²å…¥ç³»çµ±æŒ‰éˆ• (é è¨­é¡¯ç¤º) -->
                    <button id="accessBackendButton" type="button" class="px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md disabled:opacity-50">
                        é€²å…¥ç³»çµ±
                    </button>
                </div>
                
                <!-- å¯†ç¢¼è¼¸å…¥å€å¡Š (é€šç”¨) -->
                <div id="passwordSection" class="hidden p-4 mt-4 bg-gray-50 border border-red-300 rounded-lg shadow-inner">
                    <label for="backendPassword" class="block text-sm font-medium text-red-700 mb-2">
                        <span class="font-bold">ğŸ”’ å¯†ç¢¼é©—è­‰ï¼š</span> è«‹è¼¸å…¥å¯†ç¢¼ä»¥é€²å…¥å¾Œå°ã€‚
                    </label>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <input type="password" id="backendPassword" placeholder="è¼¸å…¥å¯†ç¢¼..." class="flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 transition duration-150">
                        <button id="confirmBackendAccessButton" class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition duration-150 shadow-md">
                            ç¢ºèªé€²å…¥
                        </button>
                    </div>
                    <p id="backendAccessError" class="text-red-600 text-xs mt-2 hidden">å¯†ç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥ã€‚</p>
                </div>

                <!-- å¾Œå°åŠŸèƒ½å’Œæ¸…å–®å€å¡Š (é è¨­éš±è—) -->
                <div id="backendContent" class="hidden space-y-6 mt-6 pt-4 border-t border-gray-200">
                    
                    <h3 class="text-xl font-semibold text-gray-700">æ“ä½œæŒ‰éˆ•</h3>
                    <div class="flex flex-wrap space-x-2 w-full justify-start mb-6">
                        <!-- åŒ¯å‡º CSV æŒ‰éˆ• -->
                        <button id="exportCsvButton" type="button" class="px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition duration-150 shadow-md mb-2 sm:mb-0">
                            åŒ¯å‡º CSV
                        </button>
                        <!-- æ¸…ç©ºå ±åè³‡æ–™æŒ‰éˆ• -->
                        <button id="clearDataButton" type="button" class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition duration-150 shadow-md mb-2 sm:mb-0">
                            æ¸…ç©ºå ±åè³‡æ–™
                        </button>
                        <!-- æ¸…ç©ºå•å·è³‡æ–™æŒ‰éˆ• (NEW) -->
                        <button id="clearSurveysButton" type="button" class="px-4 py-2 bg-pink-600 text-white text-sm font-medium rounded-lg hover:bg-pink-700 transition duration-150 shadow-md mb-2 sm:mb-0">
                            æ¸…ç©ºå•å·è³‡æ–™
                        </button>
                         <!-- æ¸…é™¤ç°½åˆ°/ç°½é€€æŒ‰éˆ• (NEW) -->
                        <button id="clearSignaturesButton" type="button" class="px-4 py-2 bg-yellow-600 text-white text-sm font-medium rounded-lg hover:bg-yellow-700 transition duration-150 shadow-md mb-2 sm:mb-0">
                            æ¸…é™¤ç°½åˆ°/ç°½é€€
                        </button>
                        <!-- æ–°å¢æœƒå“¡æŒ‰éˆ• (NEW) -->
                        <button id="addMemberButton" type="button" class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition duration-150 shadow-md mb-2 sm:mb-0">
                            æ–°å¢æœƒå“¡
                        </button>
                    </div>

                    
                    <!-- å ±åæ¸…å–®å€å¡Š (å·²ç§»é™¤) -->
                    <div id="registrationsListContainer" class="overflow-x-auto shadow-inner rounded-lg border">
                        <p class="p-4 text-center text-gray-500">æ¸…å–®åŠŸèƒ½å·²ç§»é™¤ã€‚è«‹ä½¿ç”¨ä¸Šæ–¹æŒ‰éˆ•åŒ¯å‡ºè³‡æ–™ã€‚</p>
                    </div>
                </div>

                <p id="backendInfoText" class="mt-4 text-gray-500 text-sm">
                    é»æ“Šã€Œé€²å…¥ç³»çµ±ã€ä¸¦è¼¸å…¥å¯†ç¢¼ä»¥æŸ¥çœ‹å ±åè€…æ¸…å–®åŠç®¡ç†è³‡æ–™ã€‚
                </p>
            </div>
        </main>

        <!-- é¡¯ç¤º User ID ä¾›å”ä½œç”¨é€” -->
        <p class="mt-4 text-xs text-gray-400">
            <span class="font-semibold">ç•¶å‰ä½¿ç”¨è€… ID:</span> <span id="currentUserId">xBTc5FIiWfWsbpCRNKEe0cphQbS2</span>
        </p>

    </div>

    <!-- å‚™è¨»èªªæ˜å½ˆçª— (Announcement Modal) - NEW -->
    <div id="announcementModal" class="hidden fixed inset-0 z-[60] flex items-center justify-center p-4 modal-bg bg-gray-900/60" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-lg p-6 sm:p-8 rounded-2xl shadow-2xl text-center border-t-8 border-sky-500">
            <h3 class="text-2xl font-bold text-gray-800 mb-4 flex items-center justify-center">
                <span class="mr-2">ğŸ“¢</span> å‚™è¨»èªªæ˜
            </h3>
            
            <div class="text-left space-y-4 text-gray-700 leading-relaxed">
                <div class="space-y-1">
                    <p class="font-semibold text-sky-700">ğŸ“… ç ”ç¿’æ™‚é–“ï¼š<span class="text-gray-900">115å¹´1æœˆ27æ—¥(é€±äºŒ)</span></p>
                    <p class="font-semibold text-sky-700">ğŸ“ ç ”ç¿’åœ°é»ï¼š<span class="text-gray-900">åœ‹ç«‹é³³æ–°é«˜ä¸­æ¼”å¥å»³</span></p>
                </div>

                <div class="bg-sky-50 p-4 rounded-xl border border-sky-100 shadow-sm">
                    <p class="font-bold text-sky-800 mb-1">ğŸ“ å ±åæ™‚é–“è³‡è¨Šï¼š</p>
                    <p class="text-gray-700">å¯’å‡ç ”ç¿’å ±åè‡ª <span class="font-bold text-sky-600">1/5 (ä¸€) 08:00</span> é–‹æ”¾å ±åï¼›<span class="font-bold text-sky-600">1/9 (äº”) 16:00</span> æˆªæ­¢å ±åï¼Œé™é¡ <span class="text-red-600 font-bold">350</span> äººã€‚</p>
                </div>

                <div class="bg-amber-50 p-4 rounded-xl border border-amber-100 shadow-sm">
                    <p class="font-bold text-amber-800 mb-1">ğŸ’¡ è²¼å¿ƒæé†’ï¼š</p>
                    <p class="text-gray-700 text-sm">ä»¥ã€Œ<span class="font-bold italic text-gray-900">115å¹´æœ‰æ•ˆæœƒå“¡è³‡æ ¼</span>ã€å ±åéŒ„å–ã€‚å°šæœªç¹³äº¤ 115 å¹´å¹´è²»è€…ï¼Œè«‹æ–¼èª²ç¨‹å ±åçµæŸå‰è‡³ç¸½å‹™çµ„å®Œæˆç¹³äº¤å¹´è²»ï¼Œå§‹å¾—åƒåŠ ç ”ç¿’å ±åˆ°ã€‚</p>
                </div>
            </div>

            <!-- é—œé–‰æŒ‰éˆ• -->
            <button id="closeAnnouncementButton" type="button" class="w-full bg-sky-600 text-white py-3 mt-6 rounded-xl font-bold hover:bg-sky-700 transition duration-200 shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500">
                æˆ‘å·²äº†è§£
            </button>
        </div>
    </div>

    <!-- æ»¿æ„åº¦èª¿æŸ¥å½ˆçª— (Modal) -->
    <div id="surveyModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-2xl p-6 sm:p-8 rounded-xl shadow-2xl text-center border-t-4 border-green-500">
            <h3 class="text-2xl font-bold text-gray-800 mb-4">ç ”ç¿’æ»¿æ„åº¦èª¿æŸ¥è¡¨</h3>
            <p id="surveyUserDisplay" class="text-lg font-semibold text-green-700 mb-6">å¡«å¯«äºº: N/A</p>

            <!-- å·²åŠ å…¥æœ€å¤§é«˜åº¦èˆ‡æ²è»¸åŠŸèƒ½ -->
            <form id="surveyForm" class="space-y-6 text-left max-h-[75vh] overflow-y-auto pr-2">
                <input type="hidden" id="surveyHiddenIdNumber" name="surveyHiddenIdNumber">
                
                <!-- é¡Œç›® 1-5 (Radio Buttons) -->
                <div id="surveyQuestionsContainer" class="space-y-4">
                    <!-- Q1 -->
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <p class="font-medium text-gray-800 mb-2">1. å°æ–¼æœ¬èª²ç¨‹å…§å®¹æ‡‰ç”¨æ–¼å¯¦éš›å·¥ä½œæ„Ÿåˆ°æ»¿æ„åº¦</p>
                        <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600" data-question="q1">
                            <label class="flex items-center space-x-1"><input type="radio" name="q1" value="éå¸¸æ»¿æ„" required="" class="text-green-600"><span>éå¸¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q1" value="æ»¿æ„" class="text-green-600"><span>æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q1" value="æ™®é€š" class="text-green-600"><span>æ™®é€š</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q1" value="ä¸æ»¿æ„" class="text-green-600"><span>ä¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q1" value="éå¸¸ä¸æ»¿æ„" class="text-green-600"><span>éå¸¸ä¸æ»¿æ„</span></label>
                        </div>
                    </div>
                    <!-- Q2 -->
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <p class="font-medium text-gray-800 mb-2">2. æœ¬æ¬¡èª²ç¨‹è¬›å¸«å°èª²ç¨‹ä¸»é¡Œä¹‹å°ˆæ¥­èƒ½åŠ›</p>
                        <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600" data-question="q2">
                            <label class="flex items-center space-x-1"><input type="radio" name="q2" value="éå¸¸æ»¿æ„" required="" class="text-green-600"><span>éå¸¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q2" value="æ»¿æ„" class="text-green-600"><span>æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q2" value="æ™®é€š" class="text-green-600"><span>æ™®é€š</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q2" value="ä¸æ»¿æ„" class="text-green-600"><span>ä¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q2" value="éå¸¸ä¸æ»¿æ„" class="text-green-600"><span>éå¸¸ä¸æ»¿æ„</span></label>
                        </div>
                    </div>
                    <!-- Q3 -->
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <p class="font-medium text-gray-800 mb-2">3. æœ¬æ¬¡èª²ç¨‹èƒ½ provide é©ç•¶ç¯„ä¾‹èˆ‡å¯¦å‹™èªªæ˜</p>
                        <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600" data-question="q3">
                            <label class="flex items-center space-x-1"><input type="radio" name="q3" value="éå¸¸æ»¿æ„" required="" class="text-green-600"><span>éå¸¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q3" value="æ»¿æ„" class="text-green-600"><span>æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q3" value="æ™®é€š" class="text-green-600"><span>æ™®é€š</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q3" value="ä¸æ»¿æ„" class="text-green-600"><span>ä¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q3" value="éå¸¸ä¸æ»¿æ„" class="text-green-600"><span>éå¸¸ä¸æ»¿æ„</span></label>
                        </div>
                    </div>
                    <!-- Q4 -->
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <p class="font-medium text-gray-800 mb-2">4. æœ¬æ¬¡èª²ç¨‹å®Œæ•´ä¸”å®¹æ˜“å¸æ”¶</p>
                        <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600" data-question="q4">
                            <label class="flex items-center space-x-1"><input type="radio" name="q4" value="éå¸¸æ»¿æ„" required="" class="text-green-600"><span>éå¸¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q4" value="æ»¿æ„" class="text-green-600"><span>æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q4" value="æ™®é€š" class="text-green-600"><span>æ™®é€š</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q4" value="ä¸æ»¿æ„" class="text-green-600"><span>ä¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q4" value="éå¸¸ä¸æ»¿æ„" class="text-green-600"><span>éå¸¸ä¸æ»¿æ„</span></label>
                        </div>
                    </div>
                    <!-- Q5 -->
                    <div class="border p-4 rounded-lg bg-gray-50">
                        <p class="font-medium text-gray-800 mb-2">5. æœ¬æ¬¡èª²ç¨‹ç¸½è©•åƒ¹</p>
                        <div class="flex flex-wrap gap-x-4 gap-y-2 text-sm text-gray-600" data-question="q5">
                            <label class="flex items-center space-x-1"><input type="radio" name="q5" value="éå¸¸æ»¿æ„" required="" class="text-green-600"><span>éå¸¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q5" value="æ»¿æ„" class="text-green-600"><span>æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q5" value="æ™®é€š" class="text-green-600"><span>æ™®é€š</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q5" value="ä¸æ»¿æ„" class="text-green-600"><span>ä¸æ»¿æ„</span></label>
                            <label class="flex items-center space-x-1"><input type="radio" name="q5" value="éå¸¸ä¸æ»¿æ„" class="text-green-600"><span>éå¸¸ä¸æ»¿æ„</span></label>
                        </div>
                    </div>
                </div>

                <!-- é¡Œç›® 6 (Textarea) -->
                <div>
                    <label for="q6" class="block text-sm font-medium text-gray-700 mb-1">6. å…¶ä»–å»ºè­°äº‹é … (é¸å¡«)</label>
                    <textarea id="q6" name="q6" placeholder="è«‹è¼¸å…¥ä»»ä½•å»ºè­°æˆ–æ„è¦‹" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 h-28"></textarea>
                </div>
                
                <!-- æäº¤æŒ‰éˆ• -->
                <button type="submit" id="submitSurveyButton" class="w-full bg-green-500 text-white py-3 mt-4 rounded-xl font-semibold hover:bg-green-600 transition duration-200 shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50">
                    é€å‡ºå•å·
                </button>
                <button type="button" id="closeSurveyFormButton" class="w-full bg-gray-300 text-gray-700 py-3 mt-2 rounded-xl font-semibold hover:bg-gray-400 transition duration-200">
                    å–æ¶ˆå¡«å¯«
                </button>
            </form>
        </div>
    </div>

    <!-- éæœƒå“¡å ±åéŒ¯èª¤å½ˆçª— (Modal) -->
    <div id="errorModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl text-center border-t-4 border-red-500">
            
            <!-- éŒ¯èª¤åœ–æ¨™ (ä½¿ç”¨ SVG) -->
            <svg class="w-16 h-16 text-red-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.302 16c-.77 1.333.192 3 1.732 3z"></path>
            </svg>

            <h3 class="text-3xl font-bold text-gray-800 mb-2" id="errorTitle">å ±åå¤±æ•—</h3>
            <p class="text-gray-600 mb-6" id="errorMessage">æ‚¨éæœƒå“¡ç„¡æ³•å ±åï¼Œè«‹æ´½æœƒå“¡çµ„</p>

            <!-- é—œé–‰æŒ‰éˆ• -->
            <button id="closeErrorModalButton" type="button" class="w-full bg-red-500 text-white py-2 rounded-lg font-semibold hover:bg-red-600 transition duration-200 shadow-md">
                ç¢ºå®š
            </button>
        </div>
    </div>

    <!-- ç°½åˆ°/ç°½é€€æˆåŠŸå½ˆçª— (Modal) -->
    <div id="signSuccessModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl text-center">
            
            <!-- æˆåŠŸåœ–æ¨™ (ä½¿ç”¨ SVG) -->
            <svg class="w-16 h-16 text-sky-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>

            <h3 class="text-3xl font-bold text-gray-800 mb-2" id="signSuccessTitle">æ“ä½œæˆåŠŸï¼</h3>
            <p class="text-gray-600 mb-6" id="signSuccessMessage">æ‚¨å·²æˆåŠŸå®Œæˆç°½åˆ°/ç°½é€€ã€‚</p>

            <!-- é—œé–‰æŒ‰éˆ• -->
            <button id="closeSignModalButton" type="button" class="w-full bg-sky-500 text-white py-2 rounded-lg font-semibold hover:bg-sky-600 transition duration-200 shadow-md">
                ç¢ºå®š
            </button>
        </div>
    </div>
    
    <!-- å ±åæˆåŠŸå½ˆçª— (Modal) -->
    <div id="successModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl text-center">
            
            <!-- æˆåŠŸåœ–æ¨™ (ä½¿ç”¨ SVG) -->
            <svg class="w-16 h-16 text-green-500 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>

            <h3 class="text-3xl font-bold text-gray-800 mb-2">å ±åæˆåŠŸï¼</h3>
            <p class="text-gray-600 mb-6">æ‚¨å·²æˆåŠŸå®Œæˆç ”ç¿’å ±åï¼Œè¬è¬æ‚¨çš„åƒèˆ‡ã€‚</p>

            <!-- é—œé–‰æŒ‰éˆ• -->
            <button id="closeModalButton" type="button" class="w-full bg-green-500 text-white py-2 rounded-lg font-semibold hover:bg-green-600 transition duration-200 shadow-md">
                ç¢ºå®š
            </button>
        </div>
    </div>
    
    <!-- ç¢ºèªæ“ä½œå½ˆçª— (ç”¨æ–¼æ¸…ç©ºè³‡æ–™å‰çš„äºŒæ¬¡ç¢ºèª) -->
    <div id="confirmModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-lg p-6 sm:p-8 rounded-xl shadow-2xl text-center border-t-4 border-red-600">
            
            <svg class="w-16 h-16 text-red-600 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>

            <h3 class="text-2xl font-bold text-gray-800 mb-2" id="confirmTitle">ç¢ºèªæ“ä½œ</h3>
            <p class="text-gray-600 mb-6" id="confirmMessage">æ‚¨ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å ±åç´€éŒ„å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸï¼</p>

            <!-- æŒ‰éˆ•å€å¡Š -->
            <div class="flex justify-center space-x-4">
                <button id="cancelConfirmButton" type="button" class="px-6 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400 transition duration-200 shadow-md">
                    å–æ¶ˆ
                </button>
                <button id="executeConfirmButton" type="button" class="px-6 py-2 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition duration-200 shadow-md">
                    ç¢ºå®šåŸ·è¡Œ
                </button>
            </div>
        </div>
    </div>

    <!-- æ–°å¢æœƒå“¡å½ˆçª— (NEW) -->
    <div id="addMemberModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg bg-gray-900/50" aria-modal="true" role="dialog">
        <div class="modal-content bg-white w-full max-w-md p-6 sm:p-8 rounded-xl shadow-2xl text-center border-t-4 border-green-500">
            
            <h3 class="text-2xl font-bold text-gray-800 mb-2">æ–°å¢å ±åæœƒå“¡</h3>
            <p class="text-gray-600 mb-4">è«‹è¼¸å…¥æ–°çš„æœƒå“¡èº«ä»½è­‰å­—è™Ÿï¼Œå°‡å…¶åŠ å…¥å ±åç™½åå–®ã€‚</p>

            <div class="space-y-3 text-left">
                <label for="newMemberIdInput" class="block text-sm font-medium text-gray-700">èº«ä»½è­‰å­—è™Ÿ (ID Number)</label>
                <input type="text" id="newMemberIdInput" placeholder="ä¾‹å¦‚: A123456789" required="" maxlength="10" pattern="[A-Z][0-9]{9}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-green-500 focus:border-green-500 transition duration-150 uppercase">
                <p id="memberAddMessage" class="text-xs text-red-500 hidden mt-1"></p>
            </div>

            <!-- æŒ‰éˆ•å€å¡Š -->
            <div class="flex justify-center space-x-4 mt-6">
                <button id="cancelAddMemberButton" type="button" class="px-6 py-2 bg-gray-300 text-gray-800 rounded-lg font-semibold hover:bg-gray-400 transition duration-200 shadow-md">
                    å–æ¶ˆ
                </button>
                <button id="confirmAddMemberButton" type="button" class="px-6 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition duration-200 shadow-md">
                    ç¢ºèªæ–°å¢
                </button>
            </div>
        </div>
    </div>


    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, collection, addDoc, query, orderBy, setDoc, getDoc, getDocs, where, updateDoc, doc, deleteDoc, onSnapshot, FieldValue, deleteField
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // è¨­å®š Firebase Log ç´šåˆ¥ç‚º Debug
        setLogLevel('debug');

        // --- è¨­å®šå¯†ç¢¼èˆ‡æœƒå“¡åå–® ---
        const EXPORT_PASSWORD = '661113'; // ç®¡ç†å“¡å¯†ç¢¼
        
        // ** å ±åæœƒå“¡ç™½åå–® (åŸºæ–¼èº«ä»½è­‰å­—è™Ÿ) **
        const REGISTRATION_ID_WHITELIST = ['S222829507', 'A220444341', 'A220710340', 'A221690507', 'A223395916', 'A223752966', 'A224117621', 'B220564616', 'B220716558', 'B221770734', 'B221875305', 'B222409118', 'C220033144', 'C220273728', 'C221179925', 'D221280353', 'D221353191', 'D221368665', 'D221792812', 'D221823723', 'D221848444', 'D222011281', 'D222243694', 'D222987959', 'E122740419', 'E124843842', 'E220079704', 'E220210483', 'E220297962', 'E220308460', 'E220341689', 'E220342293', 'E220388084', 'E220393996', 'E220616789', 'E220666234', 'E220689602', 'E220741983', 'E220843580', 'E220877353', 'E220913836', 'E220961056', 'E221050972', 'E221059948', 'E221070992', 'E221136539', 'E221163769', 'E221221784', 'E221263095', 'E221304644', 'E221355543', 'E221368586', 'E221385792', 'E221577969', 'E221613399', 'E221672861', 'E221680327', 'E221778500', 'E221803053', 'E221836052', 'E220595559', 'E222066303', 'E222072534', 'E222084463', 'E222104791', 'E222112015', 'E222139623', 'E222150962', 'E222155949', 'E222177025', 'E222177570', 'E222232843', 'E222235022', 'E222258963', 'E222277342', 'E222327570', 'E222407411', 'E222435237', 'E222448681', 'E222452434', 'E222536677', 'E222566675', 'E222566782', 'E222570295', 'E222635102', 'E222670432', 'E222704219', 'E222796093', 'E222841084', 'E222873899', 'E222884525', 'E222891164', 'E222988108', 'E223009017', 'E223016254', 'E223130393', 'E223175409', 'E223198671', 'E223236452', 'E223272403', 'E223277588', 'E223327092', 'E223335889', 'E223477300', 'E223478450', 'E223669737', 'E223691435', 'E223830058', 'E224015135', 'E224518604', 'E224586111', 'E224700960', 'E224800616', 'E226866087', 'F223485974', 'F224168089', 'F224623012', 'F224680982', 'F225807610', 'F226263872', 'F227465496', 'G220794119', 'G221261379', 'G221383236', 'H221334878', 'H221939300', 'H222198063', 'I200051735', 'J220066489', 'L220395735', 'L221450039', 'L222150396', 'L222419863', 'L222905382', 'L223725235', 'L225440226', 'M221390351', 'M221599596', 'M221636843', 'M221660465', 'M221800852', 'M222018107', 'M222116706', 'N220244548', 'N222547846', 'N222642051', 'N222752856', 'N222923122', 'N222975591', 'N224125759', 'N224134623', 'N224781506', 'N225495223', 'P220185590', 'P220716675', 'P220795603', 'P220940304', 'P221697848', 'P222200385', 'P222391103', 'P223101916', 'Q220793280', 'Q221048248', 'Q221349795', 'Q221352970', 'Q221421854', 'Q222027841', 'Q222573080', 'Q222623389', 'Q222649374', 'Q222681998', 'Q222955911', 'Q222965355', 'Q223147922', 'Q223320127', 'R220035435', 'R220067231', 'R220277835', 'R220443428', 'R220503858', 'R220841362', 'R220924893', 'R221035386', 'R221313581', 'R221516895', 'R221566288', 'R221644143', 'R221804907', 'R221887022', 'R222149183', 'R222456914', 'R222526617', 'R222599727', 'R222639495', 'R222723812', 'R222945578', 'R223039382', 'R223244730', 'R223489784', 'R224258676', 'R224394971', 'S120099116', 'S220171722', 'S220186590', 'S220200577', 'S220200817', 'S220209632', 'S220218588', 'S220224808', 'S220227238', 'S220228422', 'S220228520', 'S220235285', 'S220261632', 'S220303920', 'S220323075', 'S220375444', 'S220408288', 'S220424808', 'S220456542', 'S220489514', 'S220501588', 'S220516981', 'S220573404', 'S220692753', 'S220694766', 'S220773502', 'S220796023', 'S220901177', 'S220940085', 'S220951668', 'S220983179', 'S221023798', 'S221069098', 'S221088137', 'S221134796', 'S221222424', 'S221279432', 'S221280328', 'S221283356', 'S221334429', 'S221337626', 'S221363260', 'S221396929', 'S221436419', 'S221493816', 'S221512389', 'S221578485', 'S221584812', 'S221613023', 'S221614879', 'S221625514', 'S221676093', 'S221687612', 'S221715988', 'S221794032', 'S221809270', 'S221829334', 'S221847903', 'S221920452', 'S221958296', 'S221981777', 'S221989719', 'S222067936', 'S222069850', 'S222097158', 'S222097783', 'S222108325', 'S222132616', 'S222140172', 'S222140350', 'S222142498', 'S222167753', 'S222171239', 'S222213312', 'S222222820', 'S222248164', 'S222255927', 'S222256291', 'S222285907', 'S222294139', 'S222300598', 'S222305119', 'S222313773', 'S222324918', 'S222327188', 'S222376396', 'S222380407', 'S222380425', 'S222385279', 'S222386221', 'S222389053', 'S222426006', 'S222428662', 'S222451509', 'S222451803', 'S222530756', 'S222547457', 'S222557873', 'S222561091', 'S222571471', 'S222658357', 'S222670317', 'S222701282', 'S222712641', 'S222724016', 'S222760754', 'S222765679', 'S222798776', 'S222841718', 'S222894791', 'S222894933', 'S222899492', 'S223031047', 'S223039927', 'S223044455', 'S223124912', 'S223173004', 'S223345484', 'S223356147', 'S223404095', 'S223445943', 'S223458262', 'S223472897', 'S223473661', 'S223498373', 'S223503039', 'S223513517', 'S223517337', 'S223577664', 'S223647661', 'S223702489', 'S223738952', 'S223811885', 'S223823876', 'S223904287', 'S223918905', 'S224055096', 'S224081149', 'S224279407', 'S224339355', 'S224644459', 'S224714625', 'S224725842', 'S225056088', 'T220124877', 'T220149623', 'T220184079', 'T220257424', 'T220577949', 'T220606785', 'T220619308', 'T220643493', 'T220742151', 'T220754633', 'T220910579', 'T221102213', 'T221185696', 'T221459708', 'T221520775', 'T221718426', 'T221761365', 'T222175998', 'T222230449', 'T222280912', 'T222322853', 'T222325229', 'T222334335', 'T222334415', 'T222347538', 'T222350946', 'T222361010', 'T222542444', 'T222592042', 'T222634198', 'T222641371', 'T222833100', 'T222835364', 'T223014636', 'T223121994', 'T223143874', 'T223208227', 'T223230489', 'T223268741', 'T223321789', 'T223340113', 'T223363456', 'T223435028', 'T223450329', 'T223476403', 'T223501349', 'T223562619', 'T223686445', 'T223819748', 'U220722810', 'U220728536', 'U220822253', 'V220445720', 'V220877482', 'W200265559', 'X220049013', 'X220083908'];
        
        // ** å­¸åˆ†æŸ¥è©¢èº«ä»½è­‰å­—è™Ÿç™½åå–® **
        const CREDIT_ID_WHITELIST = ['S222327188'];
        
        // --- å…¨åŸŸè®Šæ•¸èˆ‡åˆå§‹åŒ– ---
        let db;
        let auth;
        let userId = 'anonymous';
        let isAuthReady = false;
        let isBackendAccessed = false; 
        let currentSurveyName = ''; 
        
        let morningCheckInStartTime = null; 
        let morningCheckInEndTime = null; 
        let afternoonCheckInStartTime = null; 
        let afternoonCheckInEndTime = null; 
        let afternoonCheckOutStartTime = null; 
        let afternoonCheckOutEndTime = null; 
        
        const YOUR_LOCAL_FIREBASE_CONFIG = {
          apiKey: "AIzaSyBlqR82MrYJB_SCIrlSxdcUdDrW6K96TrE",
          authDomain: "csvs-8b55d.firebaseapp.com",
          projectId: "csvs-8b55d",
          storageBucket: "csvs-8b55d.firebasestorage.app",
          messagingSenderId: "93064933978",
          appId: "1:93064933978:web:226fc3a8a271b2a4975e63",
          measurementId: "G-W2ZJKEMPV4"
        }; 
        
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = (typeof __firebase_config !== 'undefined' && __firebase_config) 
            ? JSON.parse(__firebase_config) 
            : YOUR_LOCAL_FIREBASE_CONFIG;
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        // DOM Elements
        const form = document.getElementById('registrationForm');
        const submitButton = document.getElementById('submitButton');
        const statusMessage = document.getElementById('statusMessage');
        const currentUserIdDisplay = document.getElementById('currentUserId');
        const signIdNumberInput = document.getElementById('sign_id_number');
        const morningCheckInButton = document.getElementById('morningCheckInButton');
        const afternoonCheckInButton = document.getElementById('afternoonCheckInButton');
        const afternoonCheckOutButton = document.getElementById('afternoonCheckOutButton');
        const enterSurveyButton = document.getElementById('enterSurveyButton');
        const surveyIdNumberInput = document.getElementById('survey_id_number');
        const surveyModal = document.getElementById('surveyModal');
        const surveyForm = document.getElementById('surveyForm');
        const surveyUserDisplay = document.getElementById('surveyUserDisplay');
        const surveyHiddenIdNumber = document.getElementById('surveyHiddenIdNumber');
        const submitSurveyButton = document.getElementById('submitSurveyButton');
        const morningCheckInStartTimeInput = document.getElementById('setting_morning_ci_start');
        const morningCheckInEndTimeInput = document.getElementById('setting_morning_ci_end');
        const afternoonCheckInStartTimeInput = document.getElementById('setting_afternoon_ci_start');
        const afternoonCheckInEndTimeInput = document.getElementById('setting_afternoon_ci_end');
        const afternoonCheckOutStartTimeInput = document.getElementById('setting_afternoon_co_start');
        const afternoonCheckOutEndTimeInput = document.getElementById('setting_afternoon_co_end');
        const saveSettingsButton = document.getElementById('saveSettingsButton');
        const toggleSettingsButton = document.getElementById('toggleSettingsButton');
        const settingsAccessSection = document.getElementById('settingsAccessSection');
        const settingsAccessPasswordInput = document.getElementById('settingsAccessPassword');
        const confirmSettingsAccessButton = document.getElementById('confirmSettingsAccessButton');
        const settingsInputsContainer = document.getElementById('settingsInputsContainer');
        const accessError = document.getElementById('accessError');
        const accessBackendButton = document.getElementById('accessBackendButton');
        const backendContent = document.getElementById('backendContent');
        const backendPasswordInput = document.getElementById('backendPassword'); 
        const confirmBackendAccessButton = document.getElementById('confirmBackendAccessButton'); 
        const backendAccessError = document.getElementById('backendAccessError'); 
        const exportCsvButton = document.getElementById('exportCsvButton');
        const clearDataButton = document.getElementById('clearDataButton'); 
        const clearSurveysButton = document.getElementById('clearSurveysButton'); // NEW
        const clearSignaturesButton = document.getElementById('clearSignaturesButton'); 
        const successModal = document.getElementById('successModal'); 
        const signSuccessModal = document.getElementById('signSuccessModal'); 
        const errorModal = document.getElementById('errorModal'); 
        const confirmModal = document.getElementById('confirmModal'); 
        const executeConfirmButton = document.getElementById('executeConfirmButton');
        const announcementModal = document.getElementById('announcementModal');

        let areSettingsVisible = false; 

        // --- UI Functions ---

        function showAnnouncementModal() {
            announcementModal.classList.remove('hidden');
            setTimeout(() => { announcementModal.classList.add('modal-open'); }, 10);
        }

        function hideAnnouncementModal() {
            announcementModal.classList.remove('modal-open');
            setTimeout(() => { announcementModal.classList.add('hidden'); }, 300);
        }

        function showSuccessModal() {
            successModal.classList.remove('hidden');
            setTimeout(() => { successModal.classList.add('modal-open'); }, 10);
        }

        function hideSuccessModal() {
            successModal.classList.remove('modal-open');
            setTimeout(() => { successModal.classList.add('hidden'); }, 300);
        }
        
        function showSignSuccessModal(title, message) {
            document.getElementById('signSuccessTitle').textContent = title;
            document.getElementById('signSuccessMessage').textContent = message;
            signSuccessModal.classList.remove('hidden');
            setTimeout(() => { signSuccessModal.classList.add('modal-open'); }, 10);
        }
        
        function hideSignSuccessModal() {
            signSuccessModal.classList.remove('modal-open');
            setTimeout(() => { signSuccessModal.classList.add('hidden'); }, 300);
        }

        function showErrorModal(title, message) {
            document.getElementById('errorTitle').textContent = title;
            document.getElementById('errorMessage').textContent = message;
            errorModal.classList.remove('hidden');
            setTimeout(() => { errorModal.classList.add('modal-open'); }, 10);
        }
        
        function hideErrorModal() {
            errorModal.classList.remove('modal-open');
            setTimeout(() => { errorModal.classList.add('hidden'); }, 300);
        }

        function showSurveyModal(name) {
            surveyUserDisplay.textContent = `å¡«å¯«äºº: ${name}`;
            surveyModal.classList.remove('hidden');
            setTimeout(() => { surveyModal.classList.add('modal-open'); }, 10);
        }
        
        function hideSurveyModal() {
            surveyModal.classList.remove('modal-open');
            surveyForm.reset(); 
            setTimeout(() => { surveyModal.classList.add('hidden'); }, 300);
        }
        
        function showConfirmModal(title, message, actionType) {
            document.getElementById('confirmTitle').textContent = title;
            document.getElementById('confirmMessage').textContent = message;
            executeConfirmButton.setAttribute('data-action', actionType);
            confirmModal.classList.remove('hidden');
            setTimeout(() => { confirmModal.classList.add('modal-open'); }, 10);
        }

        function hideConfirmModal() {
            confirmModal.classList.remove('modal-open');
            executeConfirmButton.removeAttribute('data-action');
            setTimeout(() => { confirmModal.classList.add('hidden'); }, 300);
        }

        function displayMessage(message, type = 'info', duration = 5000) {
            let bgColor = (type === 'success') ? 'bg-green-100' : (type === 'error') ? 'bg-red-100' : 'bg-sky-100';
            let textColor = (type === 'success') ? 'text-green-800' : (type === 'error') ? 'text-red-800' : 'text-sky-800';
            statusMessage.className = `w-full max-w-2xl p-3 mb-4 rounded-lg text-center text-sm font-medium transition duration-300 ${bgColor} ${textColor}`;
            statusMessage.textContent = message;
            clearTimeout(window.statusMessageTimeout);
            if (duration > 0) {
                window.statusMessageTimeout = setTimeout(() => {
                    statusMessage.className = `w-full max-w-2xl p-3 mb-4 rounded-lg text-center text-sm font-medium transition duration-300`;
                    statusMessage.textContent = 'ç³»çµ±æº–å‚™å°±ç·’ã€‚';
                }, duration);
            }
        }
        
        function formatToLocalDatetime(dateObj) {
            if (!(dateObj instanceof Date) || isNaN(dateObj)) return '';
            const tempDate = new Date(dateObj.getTime() - (dateObj.getTimezoneOffset() * 60000));
            return tempDate.toISOString().slice(0, 16);
        }

        const formatTimestamp = (ts) => {
            if (ts instanceof Date) return ts.toLocaleString('zh-TW');
            if (ts && ts.toDate) return ts.toDate().toLocaleString('zh-TW');
            return 'N/A';
        }

        // --- Firebase Helpers ---

        function getRegistrationsCollectionRef() {
            return collection(db, 'artifacts', appId, 'public', 'data', 'registrations');
        }

        function getSurveysCollectionRef() {
            return collection(db, 'artifacts', appId, 'public', 'data', 'surveys');
        }
        
        function getSettingsDocRef() {
            return doc(db, 'artifacts', appId, 'public', 'data', 'app_settings', 'config');
        }

        async function initializeFirebase() {
            try {
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                onAuthStateChanged(auth, async (user) => {
                    if (user) {
                        userId = user.uid;
                        currentUserIdDisplay.textContent = userId;
                        submitButton.disabled = false;
                        isAuthReady = true;
                        await fetchSettings();
                        showAnnouncementModal();
                    } else {
                        if (initialAuthToken) await signInWithCustomToken(auth, initialAuthToken); 
                        else await signInAnonymously(auth);
                    }
                });
            } catch (error) {
                displayMessage(`Firebase åˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'error', 0);
            }
        }

        // --- Core Logic ---

        async function fetchSettings() {
            try {
                const docSnap = await getDoc(getSettingsDocRef());
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    morningCheckInStartTime = data.morningCheckInStartTime?.toDate() || null;
                    morningCheckInEndTime = data.morningCheckInEndTime?.toDate() || null;
                    afternoonCheckInStartTime = data.afternoonCheckInStartTime?.toDate() || null;
                    afternoonCheckInEndTime = data.afternoonCheckInEndTime?.toDate() || null;
                    afternoonCheckOutStartTime = data.afternoonCheckOutStartTime?.toDate() || null;
                    afternoonCheckOutEndTime = data.afternoonCheckOutEndTime?.toDate() || null;
                }
            } catch (error) { console.error(error); }
        }

        async function handleFormSubmit(e) {
            e.preventDefault();
            const id_number = document.getElementById('id_number').value.trim().toUpperCase();
            if (!REGISTRATION_ID_WHITELIST.includes(id_number)) {
                showErrorModal('å ±åå¤±æ•—', 'æ‚¨éæœƒå“¡ç„¡æ³•å ±åï¼Œè«‹æ´½æœƒå“¡çµ„');
                return;
            }
            submitButton.disabled = true;
            try {
                const qCheck = query(getRegistrationsCollectionRef(), where('id_number', '==', id_number));
                const existingDocs = await getDocs(qCheck);
                if (!existingDocs.empty) {
                    displayMessage('æ‚¨å·²å ±åéã€‚', 'error');
                    return;
                }
                await addDoc(getRegistrationsCollectionRef(), {
                    school: document.getElementById('school').value.trim(),
                    name: document.getElementById('name').value.trim(),
                    id_number,
                    phone: document.getElementById('phone').value.trim(),
                    meal: document.getElementById('meal').value,
                    question: document.getElementById('question').value.trim(),
                    timestamp: new Date(),
                    registeredBy: userId
                });
                showSuccessModal();
                form.reset();
            } catch (error) { displayMessage(error.message, 'error'); }
            finally { submitButton.disabled = false; }
        }

        async function handleEnterSurvey() {
            const idNumber = surveyIdNumberInput.value.trim().toUpperCase();
            if (!idNumber) return;
            try {
                const qReg = query(getRegistrationsCollectionRef(), where('id_number', '==', idNumber));
                const regSnap = await getDocs(qReg);
                if (regSnap.empty) {
                    showErrorModal('å•å·éŒ¯èª¤', 'æŸ¥ç„¡å ±åç´€éŒ„ï¼Œç„¡æ³•å¡«å¯«ã€‚');
                    return;
                }
                const qSurvey = query(getSurveysCollectionRef(), where('id_number', '==', idNumber));
                const surveySnap = await getDocs(qSurvey);
                if (!surveySnap.empty) {
                    showErrorModal('å•å·éŒ¯èª¤', `æ‚¨å·²æ–¼ ${formatTimestamp(surveySnap.docs[0].data().timestamp)} å¡«å¯«éæ­¤å•å·ï¼Œè«‹å‹¿é‡è¤‡å¡«å¯«ã€‚`);
                    return;
                }
                surveyHiddenIdNumber.value = idNumber;
                showSurveyModal(regSnap.docs[0].data().name);
            } catch (error) { showErrorModal('éŒ¯èª¤', error.message); }
        }

        async function handleSurveySubmit(e) {
            e.preventDefault();
            const formData = new FormData(surveyForm);
            try {
                await addDoc(getSurveysCollectionRef(), {
                    id_number: surveyHiddenIdNumber.value,
                    q1: formData.get('q1'), q2: formData.get('q2'), q3: formData.get('q3'), q4: formData.get('q4'), q5: formData.get('q5'),
                    q6: formData.get('q6') || 'ç„¡å»ºè­°',
                    timestamp: new Date()
                });
                hideSurveyModal();
                showSignSuccessModal('é€å‡ºæˆåŠŸ', 'æ„Ÿè¬æ‚¨çš„æ„è¦‹å›é¥‹ã€‚');
            } catch (error) { showErrorModal('éŒ¯èª¤', error.message); }
        }

        // --- Admin Functions ---

        async function clearAllData(collectionRef, name) {
            displayMessage(`æ­£åœ¨æ¸…ç©º${name}...`, 'info', 0);
            try {
                const snapshot = await getDocs(query(collectionRef));
                const promises = snapshot.docs.map(d => deleteDoc(d.ref));
                await Promise.all(promises);
                displayMessage(`å·²æˆåŠŸæ¸…ç©º ${snapshot.size} ç­†${name}ï¼`, 'success');
            } catch (error) { displayMessage(error.message, 'error'); }
        }

        // --- Events ---

        form.addEventListener('submit', handleFormSubmit);
        enterSurveyButton.addEventListener('click', handleEnterSurvey);
        surveyForm.addEventListener('submit', handleSurveySubmit);
        
        accessBackendButton.addEventListener('click', () => {
            passwordSection.classList.toggle('hidden');
        });

        confirmBackendAccessButton.addEventListener('click', () => {
            if (backendPasswordInput.value === EXPORT_PASSWORD) {
                backendContent.classList.remove('hidden');
                isBackendAccessed = true;
                displayMessage('ç®¡ç†å“¡ç™»å…¥æˆåŠŸ', 'success');
            } else { displayMessage('å¯†ç¢¼éŒ¯èª¤', 'error'); }
        });

        clearDataButton.addEventListener('click', () => showConfirmModal('æ¸…ç©ºå ±å', 'ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å ±åè³‡æ–™ï¼Ÿ', 'clearData'));
        clearSurveysButton.addEventListener('click', () => showConfirmModal('æ¸…ç©ºå•å·', 'ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰å•å·è³‡æ–™ï¼Ÿé€™æœƒè®“æ‰€æœ‰äººé‡æ–°å¡«å¯«ã€‚', 'clearSurveys'));

        executeConfirmButton.addEventListener('click', () => {
            const action = executeConfirmButton.getAttribute('data-action');
            if (action === 'clearData') clearAllData(getRegistrationsCollectionRef(), 'å ±åè³‡æ–™');
            else if (action === 'clearSurveys') clearAllData(getSurveysCollectionRef(), 'å•å·è³‡æ–™');
            hideConfirmModal();
        });

        document.getElementById('closeAnnouncementButton').addEventListener('click', hideAnnouncementModal);
        document.getElementById('closeModalButton').addEventListener('click', hideSuccessModal);
        document.getElementById('closeSignModalButton').addEventListener('click', hideSignSuccessModal);
        document.getElementById('closeErrorModalButton').addEventListener('click', hideErrorModal);
        document.getElementById('closeSurveyFormButton').addEventListener('click', hideSurveyModal);
        document.getElementById('cancelConfirmButton').addEventListener('click', hideConfirmModal);

        initializeFirebase();
    </script>
</body></html>